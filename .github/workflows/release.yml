# name: Release for Geekbites

# on:
#   push:
#     branches:
#       - master
# jobs:
#   build_and_release:
#     runs-on: ${{ matrix.os }}
#     if: "! contains(toJSON(github.event.commits.*.message), '[skip-ci]')"

#     strategy:
#       matrix:
#         node-version: [12]
#         os: [ubuntu-latest]

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v2
#         with:
#           fetch-depth: '0'
#           persist-credentials: false

#       - name: Use Node.js ${{ matrix.node-version }}
#         uses: actions/setup-node@v2-beta
#         with:
#           node-version: ${{ matrix.node-version }}

#       - name: Check cache
#         uses: actions/cache@v2
#         id: node-cache # use this to check for `cache-hit` (`steps.node-cache.outputs.cache-hit != 'true'`)
#         with:
#           path: '**/node_modules'
#           key: ${{ runner.os }}-node-modules-${{ matrix.node-version }}-${{ hashFiles('**/package-lock.json') }}

#       - name: Install node modules
#         if: steps.node-cache.outputs.cache-hit != 'true'
#         run: npm ci
#         env:
#           CI: true

#       - name: Prepare artifacts folder
#         working-directory: ${{ github.workspace }}
#         run: mkdir artifacts

#       - name: Build Geekbites
#         run: npm run build --if-present

#       - name: Build artifact
#         run: |
#           zip -r ./artifacts/site ./dist/*

#       - name: Semantic release
#         run: npx semantic-release
#         env:
#           GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
